function bTimelineService(){this.splitIntervalToChunks=function(e,t,i){for(var n=(t-e)/i,a=[],r=0,l=new Date(e);i>r;r++,l.setTime(l.getTime()+n)){var c=new Date(l),s=new Date(c);s.setTime(s.getTime()+n);var v={beginDate:c,endDate:s};a.push(v)}return a},this.sliceIntervals=function(e,t,i){var n={beginDate:t,endDate:i};return angular.forEach(e,function(e){if(e.beginDate<n.endDate&&e.endDate>n.beginDate){var t=e.beginDate<n.beginDate?n.beginDate:e.beginDate,i=e.endDate>n.endDate?n.endDate:e.endDate,a=e.beginDate>=n.beginDate,r=e.endDate<=n.endDate;n.intervals=n.intervals||[],n.intervals.push({beginDate:t,isBegin:a,endDate:i,isEnd:r,interval:e})}}),n},this.findFirstDayOfWeek=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());return t.setHours(-24*((t.getDay()||7)-1)),t},this.updateDate=function(e,t){t=t||new Date,e.setHours(t.getHours()),e.setMinutes(t.getMinutes()),e.setSeconds(t.getSeconds())}}function bTimelineDirective(e){function t(){}function i(t){t.calcChunkIntervalLeft=function(e,t){{var i=(e.endDate.getTime()-e.beginDate.getTime())/100,n=(t.beginDate.getTime()-e.beginDate.getTime())/i;(e.endDate.getTime()-t.endDate.getTime())/i}return n+"%"},t.calcChunkIntervalRight=function(e,t){var i=(e.endDate.getTime()-e.beginDate.getTime())/100,n=(e.endDate.getTime()-t.endDate.getTime())/i;return n+"%"},t.$watchCollection("intervals",function(){if(t.intervals&&t.intervals.length){var i=e.sliceIntervals(t.intervals,t.beginDate,t.endDate);t.chunk=i}})}return t.$inject=["$scope"],{restrict:"E",template:'<div class="b-timeline"><div class="b-timeline__interval" b-timeline-interval ng-repeat="interval in chunk.intervals track by $index" ng-class="{_isBegin:interval.isBegin,_isEnd:interval.isEnd,_isStarted:false}" ng-style="{left:calcChunkIntervalLeft(chunk,interval), right:calcChunkIntervalRight(chunk,interval)}"></div></div>',scope:{beginDate:"=timelineBeginDate",endDate:"=timelineEndDate",intervals:"=timelineIntervals"},controllerAs:"",controller:t,link:i}}function bTimelineIntervalDirective(){function e(){}return{restrict:"A",require:"^bTimeline",link:e}}angular.module("bTimeline",[]).service("bTimeline",bTimelineService).directive("bTimeline",bTimelineDirective).directive("bTimelineInterval",bTimelineIntervalDirective),bTimelineDirective.$inject=["bTimeline"],bTimelineIntervalDirective.$inject=["bTimeline"];