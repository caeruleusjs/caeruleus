function bTimelineService(){this.sliceIntervals=function(e,i,n){var t={beginDate:i,endDate:n};return angular.forEach(e,function(e){if(e.beginDate<t.endDate&&e.endDate>t.beginDate){var i=e.beginDate<t.beginDate?t.beginDate:e.beginDate,n=e.endDate>t.endDate?t.endDate:e.endDate,a=e.beginDate>=t.beginDate,l=e.endDate<=t.endDate;t.intervals=t.intervals||[],t.intervals.push({beginDate:i,isBegin:a,endDate:n,isEnd:l,interval:e})}}),t},this.updateDate=function(e,i){i=i||new Date,e.setHours(i.getHours()),e.setMinutes(i.getMinutes()),e.setSeconds(i.getSeconds())}}function bTimelineDirective(e){function i(){}function n(i){i.calcChunkIntervalLeft=function(e,i){{var n=(e.endDate.getTime()-e.beginDate.getTime())/100,t=(i.beginDate.getTime()-e.beginDate.getTime())/n;(e.endDate.getTime()-i.endDate.getTime())/n}return t+"%"},i.calcChunkIntervalRight=function(e,i){var n=(e.endDate.getTime()-e.beginDate.getTime())/100,t=(e.endDate.getTime()-i.endDate.getTime())/n;return t+"%"},i.$watchCollection("intervals",function(){if(i.intervals&&i.intervals.length){var n=e.sliceIntervals(i.intervals,i.beginDate,i.endDate);i.chunk=n}})}return i.$inject=["$scope"],{restrict:"E",template:'<div class="b-timeline"><div class="b-timeline__interval" b-timeline-interval ng-repeat="interval in chunk.intervals track by $index" ng-class="{_isBegin:interval.isBegin,_isEnd:interval.isEnd,_isStarted:false}" ng-style="{left:calcChunkIntervalLeft(chunk,interval), right:calcChunkIntervalRight(chunk,interval)}"></div></div>',scope:{beginDate:"=timelineBeginDate",endDate:"=timelineEndDate",intervals:"=timelineIntervals"},controllerAs:"",controller:i,link:n}}function bTimelineIntervalDirective(){function e(){}return{restrict:"A",require:"^bTimeline",link:e}}angular.module("bTimeline",[]).service("bTimeline",bTimelineService).directive("bTimeline",bTimelineDirective).directive("bTimelineInterval",bTimelineIntervalDirective),bTimelineDirective.$inject=["bTimeline"],bTimelineIntervalDirective.$inject=["bTimeline"];