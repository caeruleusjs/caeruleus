<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>Таймлайн...</title>
    <link rel="stylesheet" href="styles/index.css">
    <script src="components/jquery/dist/jquery.min.js"></script>
    <script src="components/angular/angular.min.js"></script>
    <script src="components/angular-route/angular-route.min.js"></script>
    <script src="components/angular-i18n/angular-locale_ru.js"></script>
    <script src="components/localforage/dist/localforage.nopromises.min.js"></script>
    <script src="scripts/bTimeline.js"></script>
    <script>
      /*
       * TimelineExample
       */
      angular.module('TimelineExample', ['bTimeline'])
      
          .controller('TimelineCtrl', function ($scope) {
              console.log('timeline ctrl.', $scope)
      
              this.splitIntervalToChunks= function (beginDate, endDate, numOfChunks) {
                  var chunkDuration= (endDate - beginDate) / numOfChunks
                  var chunks= []
                  for (var i= 0, date= new Date(beginDate); i < numOfChunks; i++, date.setTime(date.getTime() + chunkDuration)) {
                      var chunkBeginDate= new Date(date)
                      var chunkEndDate= new Date(chunkBeginDate)
                      chunkEndDate.setTime( chunkEndDate.getTime() + chunkDuration )
                      var chunk= {
                          beginDate: chunkBeginDate,
                          endDate: chunkEndDate,
                      }
                      chunks.push(chunk)
                  }
                  return chunks
              }
      
              this.findFirstDayOfWeek= function (date) {
                  var resultDate= new Date(date.getFullYear(), date.getMonth(), date.getDate())
                  resultDate.setHours( ((resultDate.getDay() || 7) - 1) * -24 )
                  return resultDate
              }
      
              this.beginDate= this.findFirstDayOfWeek(new Date)
              this.endDate= new Date(this.beginDate); this.endDate.setDate( this.endDate.getDate() + 7 )
      
              this.intervals= [
                  //{ beginDate:this.beginDate, endDate:this.endDate },
              ]
      
              var beginDate, endDate= this.beginDate
      
              beginDate= new Date(endDate); beginDate.setDate( beginDate.getDate() - 1)
              endDate= new Date(beginDate); endDate.setDate( endDate.getDate() + 1 ); endDate.setHours( endDate.getHours() + 7 )
              this.intervals.push({
                  beginDate: beginDate,
                  endDate: endDate,
              })
      
              beginDate= new Date(endDate); beginDate.setDate( beginDate.getDate() + 1)
              endDate= new Date(beginDate); endDate.setDate( endDate.getDate() + 2 )
              this.intervals.push({
                  beginDate: beginDate,
                  endDate: endDate,
              })
      
              beginDate= new Date(endDate); beginDate.setHours( beginDate.getHours() + 3)
              endDate= new Date(beginDate); endDate.setHours( endDate.getHours() + 7 )
              this.intervals.push({
                  beginDate: beginDate,
                  endDate: endDate,
              })
      
              beginDate= new Date(endDate); beginDate.setHours( beginDate.getHours() + 3)
              endDate= new Date(beginDate); endDate.setHours( endDate.getHours() + 7 )
              this.intervals.push({
                  beginDate: beginDate,
                  endDate: endDate,
              })
      
              beginDate= new Date(endDate); beginDate.setHours( beginDate.getHours() + 3)
              endDate= new Date(beginDate); endDate.setHours( endDate.getHours() + 7 )
              this.intervals.push({
                  beginDate: beginDate,
                  endDate: endDate,
              })
      
              beginDate= new Date(this.endDate); beginDate.setHours( beginDate.getHours() - 17)
              endDate= new Date(this.endDate); endDate.setHours( endDate.getHours() + 7 )
              this.intervals.push({
                  beginDate: beginDate,
                  endDate: endDate,
              })
          })
      
      ;
      
      
      
    </script>
  </head>
  <body>
    <div app ng-app="TimelineExample" ng-cloak class="b-app">
      <div class="b-app__view">
        <div class="b-app__view-inner">
          <div class="b-app__head">
            <div class="b-app__head-hero">
              <!--.row
              .col.col-xs-12 12
              
              -->
            </div>
            <div class="b-app__head-menu">
              <!--.row
              .col.col-xs-12 12
              
              -->
            </div>
          </div>
          <div class="b-app__body">
            <div class="b-app__body-page">
              <h2>Это таймлайн</h2>
              <div ng-controller="TimelineCtrl as timeline" class="row">
                <b-timeline timeline-begin-date="timeline.beginDate" timeline-end-date="timeline.endDate" timeline-intervals="timeline.intervals">{{timeline}}</b-timeline>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>